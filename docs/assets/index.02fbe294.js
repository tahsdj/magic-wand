var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,c=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,i=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&c(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&c(e,a,t[a]);return e},o=(e,r)=>t(e,a(r));import{r as s,R as m,a as u}from"./vendor.35e0f08f.js";const d=[{id:"1",name:"削直",description:"選擇連續三格不轉彎的格子，材料的長度要延展到這三格中",actions:[{value:2,operator:"+",target:"attack"}]},{id:"2",name:"精煉",description:"將材料的剪影畫在中間的格子中",actions:[{value:3,operator:"+",target:"attack"}]},{id:"3",name:"咒文加護",description:"將材料名以重複文字方式繞圈，寫在上方格中",actions:[{value:2,operator:"+",target:"attack"}]},{id:"4",name:"熔接",description:"將材料焊接在右方三格之一，需與法仗串聯",actions:[{value:1.5,operator:"*",target:"attack"}]},{id:"5",name:"加冕",description:"把非生物屬性的素材畫在目前格子上有\b生物屬性的頭上",actions:[{value:2,operator:"+",target:"attack"}]},{id:"6",name:"抱佛腳",description:"在15秒內將素材畫在任一格內",actions:[{value:1,operator:"+",target:"attack"}]},{id:"7",name:"退火",description:"把整張紙揉皺後，將材料放在最皺的一格中",actions:[{value:0,operator:"+",target:"attack"}]},{id:"8",name:"鑲嵌",description:"把材料嵌入法杖最粗的那一格",actions:[{value:2,operator:"+",target:"attack"}]}],p=[{id:"1",name:"結晶巨魔",story:"很脆弱的生物，打太大力會剩粉",categroy:"結晶魔",materials:[{name:"寶石粉",value:0,criteria:["attack_>=_0"]},{name:"寶石塊",value:2,criteria:["attack_<=_3"]}]},{id:"2",name:"湖抖女神",story:"考驗挑戰戰者是否誠實",categroy:"湖抖女神",materials:[{name:"銀杏",value:1,criteria:["attack_>=_0"]},{name:"金珍菇",value:3,criteria:["attack_>=_15"]}]},{id:"3",name:"格鬥貓仔",story:"跟他當朋友，他會把他的獵物送給你。如果比武贏了，他則會獻上他的零食。",categroy:"貓",materials:[{name:"毛毛蟲",value:3,criteria:["attack_>=_0"]},{name:"貓頭餅乾",value:3,criteria:["attack_>=_6"]}]},{id:"4",name:"灰色烏鴉",story:"沒有那麼黑的烏鴉，飛過時留下羽毛，在對的時間偷窺看，能撿到巢裡的收藏",categroy:"烏鴉",materials:[{name:"鴉羽",value:1,criteria:["attack_>=_0"]},{name:"鑽石",value:3,criteria:["attack_=_5"]}]},{id:"5",name:"魔眼狼",story:"寄生魔眼會寄生在五感中視力較不靈敏的生物上，特別喜歡寄生在狼的身上，因為他可以利用狼的嚎叫引出更多狼群。",categroy:"寄生生物",materials:[{name:"狼毫",value:1,criteria:["attack_>=_0"]},{name:"寄生之眼",value:3,criteria:["attack_>=_2"]}]},{id:"6",name:"ATM魔人",story:"",categroy:"魔人",materials:[{name:"50元銅板",value:2,criteria:["attack_>=_0"]},{name:"千元大鈔",value:4,criteria:["attack_>=_3"]}]},{id:"7",name:"閃光壁虎",story:"",categroy:"壁虎",materials:[{name:"斷尾",value:3,criteria:["attack_>=_0"]},{name:"蟑螂觸鬚",value:5,criteria:["attack_>=_4"]}]},{id:"8",name:"深海食人貝",story:"",categroy:"貝類",materials:[{name:"深海泡沫",value:4,criteria:["attack_>=_0"]},{name:"淚之珍珠",value:6,criteria:["attack_>=_5"]}]}],v=[{id:"draw_material",name:"抽素材"},{id:"draw_action",name:"抽執行動作"}],f=()=>{const[e,t]=s.exports.useState(0),[a,r]=s.exports.useState(p.sort((()=>Math.random()-.5)).map((e=>e.id))),[l,n]=s.exports.useState([]),[c,u]=s.exports.useState([...d,...d].sort((()=>Math.random()-.5)).map((e=>e.id))),[f,b]=s.exports.useState([]),[y,_]=s.exports.useState(0),[x,g]=s.exports.useState({attack:0,name:"",history:[]}),[k,E]=s.exports.useState(),[h,w]=s.exports.useState(),N=()=>{const e=(()=>{var e;switch(null==(e=v[y])?void 0:e.id){case"draw_material":return k;case"draw_action":return h;default:return null}})();y+1<v.length?_((e=>e+1)):(_(0),t((e=>e+1))),g((t=>o(i({},t),{history:[...t.history,e]})))};s.exports.useEffect((()=>{var t,r;n((t=e,r=1,Array(r).fill().map(((e,l)=>{const n=a[t*r+l];return p.find((e=>e.id===n))||{}})))),b(((e,t)=>Array(t).fill().map(((a,r)=>{const l=c[e*t+r];return d.find((e=>e.id===l))||{}})))(e,2)),_(0),(()=>{if(x.history.length>=v.length){const e=x.history.length,[t,a]=[x.history[e-2],x.history[e-1]],r=a.actions.reduce(((e,t)=>{switch(t.operator){case"+":return e+Number(t.value);case"-":return e-Number(t.value);case"*":return e*Number(t.value);case"/":return e/Number(t.value);default:return e}}),Number(null==t?void 0:t.value)),l=x.attack+r;g(o(i({},x),{attack:l}))}})()}),[e]);const S=(()=>{var e;switch(null==(e=v[y])?void 0:e.id){case"draw_material":return!k;case"draw_action":return!h;default:return!1}})();return m.createElement("div",{className:"relative w-[500px] h-[500px] flex flex-col items-center p-[10px]"},m.createElement("div",{className:"absolute flex flex-col w-50 left-full transform translate-x-10 top-0 border border-solid rounder border-gray-300 p-3"},m.createElement("span",null,"玩家資訊"),m.createElement("span",null,`攻擊力: ${x.attack}`)),m.createElement("h1",{className:"text-xl mb-5"},e<7?`第 ${e+1} 回合`:""),e<7&&m.createElement(m.Fragment,null,(()=>{var e;switch(null==(e=v[y])?void 0:e.id){case"draw_material":return m.createElement("div",null,l.map((e=>m.createElement("div",{className:"flex flex-col items-center w-60 h-100 p-5 gap-3"},m.createElement("h2",null,e.name),m.createElement("p",null,e.story),m.createElement("div",{className:"flex flex-row gap-2 items-center w-full justify-center gap-3"},e.materials.filter((e=>e.criteria.every((e=>{const[t,a,r]=e.split("_");switch(a){case"=":return x[t]===Number(r);case">=":return x[t]>=Number(r);case"<=":return x[t]<=Number(r);case"<":return x[t]<Number(r);case">":return x[t]>Number(r);default:return!1}})))).map((e=>m.createElement("div",{className:`flex flex-col p-3 items-start gap-1 border border-solid ${(null==k?void 0:k.name)===e.name?"border-[#2fad88fa]":"border-gray-200"} cursor-pointer`,onClick:()=>{E(e)}},m.createElement("h3",null,e.name),m.createElement("p",null,`攻擊＋ ${e.value}`)))))))));case"draw_action":return m.createElement("div",{className:"flex flex-row items-start gap-5 mb-10"},f.map((e=>m.createElement("div",{className:"flex flex-col items-center w-60 min-h-80 p-5 gap-3 border border-solid "+((null==h?void 0:h.name)===e.name?"border-[#2fad88fa]":"border-gray-200"),onClick:()=>(e=>{w(e)})(e)},m.createElement("h2",null,e.name),m.createElement("p",null,e.description),m.createElement("div",{className:"flex flex-col items-start w-full"},m.createElement("h3",null,"獲得效果:"),e.actions.map((e=>m.createElement("p",null,`選取素材攻擊力  ${e.operator} ${e.value}`))))))));default:return null}})(),m.createElement("div",{className:"w-50 p-2 border border-solid rounded text-center cursor-pointer "+(S?"border-gray-200 cursor-not-allowed":"border-[#2fad88fa]"),onClick:()=>{S||N()}},"確認選取")),7===e&&m.createElement("div",{className:"text-xl"},"恭喜你完成魔杖"))};function b(){return m.createElement("div",{className:"w-screen flex flex-col items-center pt-30 bg-[#fdf6e3] min-h-screen"},m.createElement(f,null))}u.render(m.createElement(m.StrictMode,null,m.createElement(b,null)),document.getElementById("root"));
